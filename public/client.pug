doctype html
html(lang="ca")
  head
    meta(charset="UTF-8")
    meta(name="viewport" content="width=device-width, initial-scale=1.0")
    title Pàgina d'Inici
    link(href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet")
    script(src="https://cdn.tailwindcss.com")
    script(src="https://cdn.canvasjs.com/canvasjs.min.js")
    script(src="ClientUi.js")
    style.
      body {
        font-family: 'Montserrat', sans-serif;
      }

  body(class="bg-gradient-to-r from-[#0e1c26] via-[#2a454b] to-[#294861]")
    header(class="bg-gradient-to-r from-[#0e1c26] via-[#2a454b] to-[#294861] fixed top-0 left-0 w-full shadow-md z-10 p-4")
      div(class="flex justify-between items-center max-w-4xl mx-auto text-[#DADADA]")
        a(href="/" class="") ME
        ul(class="flex space-x-4")
          li
            a(href="#" class="relative group")
              | Abu
              span(class="absolute left-0 -bottom-1 block h-0.5 w-full bg-[#DADADA] scale-x-0 transition-transform duration-300 group-hover:scale-x-100")
          li
            a(href="#" class="relative group")
              | Cesc
              span(class="absolute left-0 -bottom-1 block h-0.5 w-full bg-[#DADADA] scale-x-0 transition-transform duration-300 group-hover:scale-x-100")
          li
            a(href="#" class="relative group")
              | André
              span(class="absolute left-0 -bottom-1 block h-0.5 w-full bg-[#DADADA] scale-x-0 transition-transform duration-300 group-hover:scale-x-100")
          li
            a(href="#" class="relative group")
              | Dídac
              span(class="absolute left-0 -bottom-1 block h-0.5 w-full bg-[#DADADA] scale-x-0 transition-transform duration-300 group-hover:scale-x-100")
    div(class="min-h-screen flex justify-center pt-20 font-sans")
      div(class="px-8 pt-6 pb-8 mb-4 rounded-lg max-w-4xl w-full")
        h1(class="text-4xl font-bold text-[#DADADA] mb-6") La Crisi de la Migració Negativa a Europa
        p(class="text-[#DADADA] text-lg mb-6") Europa s'enfronta a una disminució de la seva població a causa de l'emigració i la baixa taxa de natalitat. Quines en són les conseqüències?
        
        div(class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6")
          img(src="/img/world-map.jpg" alt="Imatge 1" class="rounded-lg shadow-lg")
          img(src="/img/banner-provisional.jpg" alt="Imatge 2" class="rounded-lg shadow-lg")
  
        div(id="resumen" class="mb-6")
          p(class="text-[#DADADA] text-lg") El 2023, la UE va registrar 3,7 milions de migrants legals i 385.000 migrants irregulars. Es van presentar més d'1 milió de sol·licituds d'asil, sent Alemanya, Espanya, França i Itàlia els principals receptors. Síria, Afganistan, Turquia, Veneçuela i Colòmbia van ser els principals països d'origen dels sol·licitants. Els refugiats constitueixen fins a l'1,5% de la població de la UE, amb Alemanya al capdavant en la concessió d'asil. La UE ha destinat 22.700 milions d'euros per a la gestió migratòria entre 2021 i 2027.
      
        div(id="chartContainer" class="mb-6 rounded-lg p-4" style="height: 370px; width: 100%;")
        
        div(id="barChart" class="mb-6 rounded-lg p-4" style="height: 370px; width: 100%;")
        p(class="text-[#DADADA] text-lg mb-6") Aquest gràfic mostra la quantitat de persones que emigren en comparació amb les que arriben a diferents països europeus. Es pot observar que en moltes regions hi ha una tendència creixent d'emigració, cosa que genera un impacte significatiu en la demografia i l'economia.
        
        div(id="lineChart" class="mb-6 rounded-lg p-4" style="height: 370px; width: 100%;")
        p(class="text-[#DADADA] text-lg mb-6") El següent gràfic mostra la tendència de la població en declivi al llarg del temps. La disminució de la població en molts països europeus és un senyal d'alerta pel futur del creixement econòmic i la sostenibilitat dels sistemes de benestar.

        div(class="mb-6")
          h2(class="text-4xl font-bold text-[#DADADA] mb-6") Dades Clau
         
        div(class="px-8 pt-6 pb-8 mb-4 flex flex-col items-center w-full mt-6 max-w-3xl text-center mx-auto")
          h1(class="text-4xl font-bold text-[#DADADA] mb-6") La Crisi de la Migració Negativa a Europa
          p(class="text-[#DADADA] text-lg mb-6")
            | La migració negativa ocorre quan més persones emigren d’un país que no pas les que hi arriben. Aquest fenomen afecta l'economia, el mercat laboral i el sistema de pensions, posant en risc el creixement de moltes nacions europees.
        
        iframe(
          style="width: 100%; height: 600px;" 
          src="https://flo.uri.sh/visualisation/8640752/embed" 
          title="Contingut interactiu o visual" 
          class="flourish-embed-iframe" 
          frameborder="0" 
          scrolling="no" 
          sandbox="allow-same-origin allow-forms allow-scripts allow-downloads allow-popups allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation"
        )

        div
          a(href="/dragndrop" class="text-[#DADADA] underline") Joc - Països amb més emigració
      
    footer(class="w-full pt-20 bg-gradient-to-r from-[#0e1c26] via-[#2a454b] to-[#294861] text-[#DADADA] py-6 mt-8 shadow-2xl shadow-black")
      div(class="max-w-4xl mx-auto text-center")
        p(class="text-sm") © 2025 ME. Tots els drets reservats.

    script.
      window.onload = async function() {
        try {
          const chartData = {
            barChart: {
              labels: ["España", "Italia", "Alemania", "Francia", "Grecia"],
              datasets: [
                {
                  label: "Personas que emigran",
                  data: [500000, 450000, 600000, 300000, 250000],
                  backgroundColor: "rgba(255, 99, 132, 0.5)"
                },
                {
                  label: "Personas que llegan",
                  data: [200000, 150000, 300000, 100000, 80000],
                  backgroundColor: "rgba(54, 162, 235, 0.5)"
                }
              ]
            },
            lineChart: {
              labels: ["2000", "2005", "2010", "2015", "2020"],
              datasets: [
                {
                  label: "Población de Italia",
                  data: [57000000, 56000000, 55000000, 54000000, 53000000],
                  borderColor: "rgba(255, 206, 86, 1)",
                  fill: false
                },
                {
                  label: "Población de España",
                  data: [46000000, 45000000, 44000000, 43000000, 42000000],
                  borderColor: "rgba(75, 192, 192, 1)",
                  fill: false
                },
                {
                  label: "Población de Alemania",
                  data: [82000000, 81000000, 80000000, 79000000, 78000000],
                  borderColor: "rgba(153, 102, 255, 1)",
                  fill: false
                }
              ]
            }
          };

          console.log("Datos cargados:", chartData);
          
          var asylumChart = new CanvasJS.Chart("chartContainer", {
            animationEnabled: true,
            backgroundColor: "transparent",
            theme: "light2",
            title: {
              text: "Solicitudes de Asilo en la UE (2023)",
              fontColor: "#DADADA"
            },
            axisY: {
              title: "Cantidad (%)",
              titleFontColor: "#DADADA",
              labelFontColor: "#DADADA"
            },
            axisX: {
              labelFontColor: "#DADADA"
            },
            data: [{
              color: "#50C878",
              type: "column",
              dataPoints: [
                { label: "Alemania", y: 31.4 },
                { label: "España", y: 15.3 },
                { label: "Francia", y: 13.8 },
                { label: "Italia", y: 12.4 },
                { label: "Otros", y: 27.1 }
              ]
            }]
          });
          asylumChart.render();
          
          if (!chartData || !chartData.barChart || !chartData.lineChart) {
            throw new Error("Los datos de los gráficos no tienen el formato esperado");
          }
          
          var barChart = new CanvasJS.Chart("barChart", {
            animationEnabled: true,
            theme: "light2",
            backgroundColor: "transparent",
            title: {
              text: "Personas que emigran vs. llegan",
              fontColor: "#DADADA"
            },
            legend: {
              fontColor: "#DADADA"
            },
            axisY: {
              title: "Cantidad de Personas",
              titleFontColor: "#DADADA",
              labelFontColor: "#DADADA"
            },
            axisX: {
              labelFontColor: "#DADADA"
            },
            data: [
              {
                color: "#50C878",
                type: "column",
                name: "Emigran",
                showInLegend: true,
                dataPoints: chartData.barChart.labels.map((label, i) => ({
                  label: label,
                  y: chartData.barChart.datasets[0].data[i]
                }))
              },
              {
                color: "#4682B4",
                type: "column",
                name: "Llegan",
                showInLegend: true,
                dataPoints: chartData.barChart.labels.map((label, i) => ({
                  label: label,
                  y: chartData.barChart.datasets[1].data[i]
                }))
              }
            ]
          });
          barChart.render();
          
          var lineChart = new CanvasJS.Chart("lineChart", {
            animationEnabled: true,
            theme: "light2",
            backgroundColor: "transparent",
            title: {
              text: "Tendencia de la población en declive",
              fontColor: "#DADADA"
            },
            legend: {
              fontColor: "#DADADA"
            },
            axisY: {
              title: "Población",
              titleFontColor: "#DADADA",
              labelFontColor: "#DADADA"
            },
            axisX: {
              labelFontColor: "#DADADA"
            },
            data: chartData.lineChart.datasets.map((dataset, index) => {
              const colors = ["#50C878", "#50C878", "#50C878"];
              return {
                type: "line",
                showInLegend: true,
                name: dataset.label,
                color: colors[index % colors.length],
                dataPoints: chartData.lineChart.labels.map((label, i) => ({
                  label: label,
                  y: dataset.data[i]
                }))
              };
            })
          });
          lineChart.render();
          
          console.log("Gráficos renderizados exitosamente");
        } catch (error) {
          console.error("Error al renderizar los gráficos:", error);
        }
      };